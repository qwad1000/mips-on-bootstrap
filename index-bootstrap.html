<!DOCTYPE html>
<html ng-app="MIPS-app">
<head>
	<meta charset="UTF-8"/>
	<title>MIPS page</title>
	<!--<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>-->
	<script src="res/angular.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">-->
	<link rel="stylesheet" type="text/css" href="res/bootstrap.min.css">
	<!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>-->
	<script src="res/jquery-1.11.2.min.js"></script>
</head>

<body ng-controller="testController">
	<div class="page-wrapper container-fluid">
		<div class="row main-part-wrapper">
			<div class="col-sm-4 column">
				<button type="button" class="btn btn-success btn-block btn-sm" ng-click="loadInfo()">{{ loadBtnText }}</button>
				<div class="editor-wrapper">
					<div id="editor" class="code-editor" ng-model="codeArea">
addi $t1 $zero 0x14
addi $t2 $zero 0x20
sw $t2 0($t1)				
					</div>
				</div>
				<div class="btn-group-sm btn-group-justified" ng-hide="isEditing">
					<a type="button" class="btn btn-primary" ng-click="runConvert()" ng-disabled="commandsCount==0">Run</a>
					<a type="button" class="btn btn-default" ng-click="runStep()" ng-disabled="commandsCount==0">Step</a>
					<a type="button" class="btn btn-danger" ng-click="reset()">Reset</a>
				</div>
			</div>
			<div class="col-sm-4 column">
				<div class="table-wrapper">
					<table class="table table-striped table-condensed table-hovered table-bordered">
						<thead>
							<tr>
								<th>RegName</th>
								<th>RegValue</th>
								<th>RegName</th>
								<th>RegValue</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>PC</td>
								<td>todo</td>
								<td>?</td>
								<td>todo</td>
							</tr>

							<tr ng-repeat="row in dividedRegisters track by $index">
								<td>r{{ row[0].indx }}/{{ row[0].name }}</td>
								<td>{{ returnRegister(row[0].indx, hexRegFmt) }}</td>
								<td>r{{ row[1].indx }}/{{ row[1].name }}</td>
								<td>{{ returnRegister(row[1].indx, hexRegFmt) }}</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="number-type-wrapper">
					<label>Register value format:</label>
					<label class="radio-inline">
						<input type="radio" name="number-type" value="dec" ng-model="hexRegFmt">
						Dec
					</label>
					<label class="radio-inline">
						<input type="radio" name="number-type" value="hex" ng-model="hexRegFmt" >
						Hex
					</label>
				</div>
			</div>

			<div class="col-sm-4 column">
				<div class="table-wrapper">
					<table class="table table-striped table-condensed table-bordered">
						<thead>
							<tr>
							<th> </th>
							<th class="info" ng-repeat="num in [0,1,2,3,4,5,6,7]">
								{{num}}
							</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="num in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]">
								<th class="info">{{ memoryShift + num*8 }}</th><!--todo: 8 -> cols-->
								<td class="memory-cell" ng-repeat="inf in [0,1,2,3,4,5,6,7]">
									{{ returnMemoryValue(memoryShifts[num][inf],hexRegFmt) }}
								</td>
							</tr>
						</tbody>
					</table>
					<p ng-show="ram.isClear()">
						There is no values in memory
					</p>
				</div>
				<div>
					<label>Смещение (hex):</label>
					<input type="number" ng-model="memoryShift">
					<button class="btn btn-sm btn-success" ng-click="changeMemoryShift()">Look through</button>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<textarea class="result-area" ng-model="resultArea"></textarea>
			</div>
		</div>
	</div>

	<!-- ======  Scripts + CSS section  ======= -->

	<script src="res/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
	<script src="res/example.js"></script>
	<script type="text/javascript">
		var editor = ace.edit("editor");
		editor.setTheme("ace/theme/twilight");
		editor.getSession().setMode("ace/mode/mips");
	</script>

	<style type="text/css">
		.ace_gutter-cell.ace_breakpoint{
			border-radius: 20px 0px 0px 20px;
			box-shadow: 0px 0px 1px 1px red inset;
		}
	</style>

	<link rel="stylesheet" type="text/css" href="css/new-ide.css">


	<script src="res/emulator/mips.js"></script>
	<script src="res/emulator/mips_constants.js"></script>
	<script src="res/emulator/utility.js"></script>
	<script src="res/mainController.js"></script>
	
</body>
</html>